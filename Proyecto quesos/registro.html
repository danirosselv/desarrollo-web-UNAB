<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Registro — Queso & Sabor</title>
<style>
body{margin:0;font-family:system-ui;background:#f6f7f9}
.wrap{max-width:500px;margin:auto;padding:10px}
header,section{background:#fff;border:1px solid #ddd;border-radius:8px;padding:12px;margin:8px 0}
header{display:flex;justify-content:space-between}
.btn{border:1px solid #ddd;border-radius:6px;padding:6px 12px;text-decoration:none;color:#333}
form{display:grid;gap:8px;margin-top:12px}
input{padding:8px 10px;border:1px solid #ddd;border-radius:6px}
.msg{margin-top:8px;color:#7f1d1d}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <a class="btn" href="index.html">← Tienda</a>
    <a class="btn" href="login.html">Ingresar</a>
  </header>

  <section>
    <h2>Crear cuenta</h2>
    <form id="form">
      <input id="name" placeholder="Nombre">
      <input id="email" type="email" placeholder="Correo">
      <input id="pass" type="password" placeholder="Contraseña (8+)">
      <button class="btn" type="submit">Registrarse</button>
      <div id="msg" class="msg"></div>
    </form>
  </section>
</div>

<script>
document.getElementById("form").onsubmit = e => {
  e.preventDefault()
  const nombre = document.getElementById("name").value.trim()
  const correo = document.getElementById("email").value.trim().toLowerCase()
  const pass = document.getElementById("pass").value.trim()
  const $msg = document.getElementById("msg")
  
  if(!nombre || !correo.includes('@') || pass.length < 8){
    $msg.textContent = "Completa todos los campos (contraseña 8+ caracteres)"
    return
  }
  
  const users = JSON.parse(localStorage.getItem("qs_users") || "[]")
  if(users.some(u => u.email === correo)){
    $msg.textContent = "El correo ya está registrado"
    return
  }
  
  users.push({nombre, email:correo, pass, direcciones:[]})
  localStorage.setItem("qs_users", JSON.stringify(users))
  $msg.style.color = "#065f46"
  $msg.textContent = "Cuenta creada. Redirigiendo..."
  setTimeout(() => location.href = "login.html", 800)
}
</script>
</body>
</html>